<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Email Tone Classifier</title>
    <style>
      body { font-family: Arial, sans-serif; max-width:800px; margin:40px auto; }
      textarea { width:100%; height:140px; font-size:14px; padding:10px; }
      button { padding:10px 18px; font-size:16px; margin-top:10px; cursor:pointer; }
      .result { margin-top:20px; padding:12px; border-radius:8px; background:#f3f4f6; }
      .meta { color:#666; font-size:13px; }
    </style>
  </head>
  <body>
    <h2>Email Tone Classifier â€” Demo</h2>
    <p>Type or paste an email and click <b>Classify</b>.</p>

    <textarea id="emailText">Dear Sir/Madam, I am writing to request an update regarding my application status.</textarea>
    <br>
    <button onclick="classify()">Classify</button>

    <div id="out" class="result" style="display:none;">
      <div id="tone" style="font-weight:700"></div>
      <div id="details" class="meta"></div>
    </div>

    <script>
      async function classify(){
        const text = document.getElementById('emailText').value;

        const res = await fetch('/predict', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({text})
        });

        const data = await res.json();
        document.getElementById('out').style.display='block';

        if(data.error){
          document.getElementById('tone').innerText = "Error: " + data.error;
          document.getElementById('details').innerText = "";
          return;
        }

        document.getElementById('tone').innerText = "Predicted Tone: " + data.tone;
        document.getElementById('details').innerText = "Method: " + data.method +
          (data.confidence ? " | Confidence: " + data.confidence.toFixed(2) : "");
      }
    </script>
  </body>
</html>
